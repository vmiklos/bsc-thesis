\section{Bevezetõ}

Felmérések támasztják alá, hogy az idõsödõ emberek a lehetõ legtovább
szeretnék megõrizni függetlenségüket, otthonukban maradni és a
segítséget ott megkapni. Azaz egyre nagyobb felügyeleti, gondozási és
ápolási kapacitásra lesz szükség.

Az életviteli rendszerek létrehozásakor az a feladatunk, hogy
megtervezzük, hogy hogyan segíthetjük az idõsebbeket és más rászorulókat
abban, hogy otthon, a munkahelyen és szociális kapcsolataikban minél
tovább független, hasznos tagjai maradjanak a társadalomnak.

Az egészségügyi és a szociális ellátás területén kiemelendõ az
idõskorúak, továbbá a fogyatékkal élõk, a betegségbõl felépülõk és a
rehabilitációra szorulók ellátásának, gondozásának, felügyeletének,
ápolásának, önálló életvitelének segítése infokommunikációs eszközök
alkalmazásával, rendszerbe állításával; a táv-diagnosztikai és
távgyógyászati rendszerek elterjedésének elõsegítése, valamint az
otthonápolás támogatása\cite{evita}.

Ahhoz, hogy infokommunikációs eszközeink valóban kiszolgáljanak - és ne
kiszolgáltatottá tegyenek - bennünket, egymással együttmûködni képes és
egyszerûen kezelhetõ eszközökre van szükség, amihez elengedhetetlen egy
megbízhatóan mûködõ keretrendszer. Ha a keretrendszer stabilitási
problémákkal küzd, vagy funkcionalitásában korlátozza az egyes
eszközöket, akkor hiába fejlesztenek a rendszerhez kiváló modulokat.

Az életviteli rendszerbe kapcsolt infokommunikációs eszközök tehát
elsõsorban abban különböznek a hagyományos társaiktól, hogy az azokat
használó ember felé minimális elvárásokat támasztanak. Egy vérnyomásmérõ
esetén a legjobb, ha maga az eszköz tudja, hogy mikor kell a mérést
elvégezni, és erre figyelmezteti is az illetõt. Nem szerencsés, ha a mérés
elkészülte után a mérési eredményt a betegnek kell kézzel rögzítenie,
jobb, ha maga a mûszer rendelkezik saját memóriával, amelynek tartalmát azonnal vagy
késõbb valamilyen adatbázisba küldi el. Ezen kívül fontos szempont, hogy a
kezelés minél egyszerûbb legyen.

Például egy mérleg esetén jó lehet, ha súly ráhelyezése esetén
automatikusan rögzíti a mérési eredményt, és nem kell erre kézzel
utasítani.

Az összekapcsolást nehezítõ technikai probléma viszont, hogy az eszközök
tipikusan kevés információt árulnak el magukról, így az automatikus
rendszerbe állítás abban az esetben, ha az eszköz még korábban nem volt a rendszer
része, igencsak nehézkes. Ezen segíthetünk, ha megengedjük, hogy ne
közvetlenül az eszközökkel kommunikáljon a rendszer, hanem az egyes
eszközökhöz készített illesztõkön keresztül, és azt a célt tûzzük ki, hogy csak
olyan eszközökkel mûködjön együtt, melyek fel vannak készítve a mi
rendszerünkben való mûködésre.

Ezzel elérhetõvé válhat az a használati eset, mikor a vásárló meglátja a
boltban egy eszközön egy rendszer emblémáját, hazaviszi a terméket, és
az azonnal használható, mindenféle beállítás nélkül (vagy minimális
beállítással). Ez a példa kissé elrugaszkodottnak tûnik, azonban ha
figyelembe vesszük az idõsebb emberek igényeit, az elõbbi funkcióra
igenis igény lenne, ha lenne ilyen rendszer.

Mielõtt azonban új rendszer tervezésébe kezdenénk, érdemes megvizsgálni,
hogy jelenleg milyen megoldások, vagy megoldás-kezdemények érhetõek el a
piacon. A problémát alapvetõen két részre lehet bontani. Egyrészt
bármilyen életviteli rendszer készítésekor érdemes felhasználni
valamilyen kommunikációs keretrendszert, tehát az
alternatívákat érdemes mérlegelni, figyelembe véve, hogy milyen igényeink
vannak, és milyen funkcionalitást nyújtanak a jelenleg elérhetõ
implementációk. Másrészt érdemes azt is tanulmányozni, hogy ezekre a
keretrendszerekre alapozva milyen jelenleg is mûködõ és elérhetõ
életviteli rendszerek készültek el.

Arra sajnos már elõre fel kell készülni, hogy jelenleg még nem érhetõ el
nyílt szabvány életviteli rendszerekkel kapcsolatban, illetve
esetlegesen jövõbeli ilyen rendszerhez készítendõ mûszerekhez, így a
jelenleg rendelkezésre álló rendszerek sem használhatnak ilyet,
következésképp kevés információt tudhatunk meg róluk. Ennek ellenére
célunk felfedni ezen rendszerek elõnyeit és hátrányait, hogy egy új
rendszer tervezésekor a korábbiak példájából tanulva tudjunk mérlegelni.

A jelenleg mûködõ életviteli rendszerekben használt keretrendszerek
tanulmányozásával nem célunk tanulni azok hibáiból, hiszen a témakiírás elõirja, hogy az új rendszer alapja az
Erlang nyelv és környezet legyen. Ennek ellenére hasznos összehasonlítani
az Erlang által nyújtott funkcionalitást más keretrendszerekkel, ezáltal
is könnyebben rátapinthatunk az Erlang rendszer elõnyeire és gyengeségeire.

A korábban már említett zártság miatt az elkészült
rendszerekben is inkább a felhasználó oldaláról érzékelhetõ
különbségeket, a rendszer tapasztalható elõnyeit és hátrányait
igyekszünk megmutatni, majd ezen elemzés figyelembevételével nekikezdeni
a saját, Erlang alapú rendszer tervezésének.

Fontos leszögezni, hogy a jelen munka tárgya elsõsorban az életviteli
rendszer megalkotásához szükséges köztes réteg (middleware) tervezése és
elkészítése Erlang környezetben. Terjedelmi okokból egy teljes
életviteli rendszer megvalósítása nem lehet a célunk, de
megvizsgálunk néhány jelenleg is elérhetõ megoldást, így reális képet
kaphatunk arról, hogy a tervezett rendszer milyen is lenne teljesen
megvalósított állapotában.

A számunkra szükséges funkcionalitást nyújtó keretrendszerre jó példa az
OSGi\cite{osgi}, mely Java nyelven készült, és sok olyan problémára nyújt
megoldást, amely a Java alatt futó JVM esetén különös nehézséget
jelent, míg ezek jelentõs hányadára az Erlang Beam virtuális gépe nyelvi
szinten nyújt megoldást.

Példaként említjük itt a futási idõben betölthetõ, újratölthetõ és
törölhetõ modulokat, az egyes monitorozandó
csomópontok automatikus felügyeletét, vagy a rendszerjavítási célból futási idõben kiértékelt
parancsok végrehajtását\cite{pe}.

A jelen bevezetõnek azonban nem célja részletesen specifikálni ezeket a
feladatokat, csak rá akar mutatni a szemmel látható szimmetriára az
Erlang környezet által nyújtott szolgáltatások és az életviteli
rendszerek által igényelt funkcionalitás között.

\subsection{Életviteli rendszerek}

\subsubsection*{Tunstall}

A végfelhasználó számára tényleges segítséget nyújtó életviteli
rendszert valósított meg az angol Tunstall\cite{tunstall} cég. Céljuk
telekommunikációs megoldásokat felhasználni az egészséggondozás
problémakörében, ezzel biztosítva idõsebb emberek számára, hogy hosszabb
távon önellátó módon élhessenek, és hatékonyan gondoskodhassanak saját
egészségükrõl, jó közérzetükrõl.

Az általuk kiemelt fõbb problémakörökre a következõ fejezetben
részletesen kitérünk.

\subsubsection*{Everon}

Hasonló módon kulcsrakész életviteli rendszert hozott létre a finn Oy
Exrei Ab\cite{exrei} cég is, az Everon\cite{everon} márkajelzésû
termékeivel.

Az Exrei cég megoldásai három területre bonthatók:

\begin{itemize}
	\item Személyi biztonság. Egy modern vezeték nélküli
riasztó és monitorozó rendszert hoztak létre, mely lehetõséget ad
mozgásukban korlátozott és idõsebb emberek számára, hogy továbbra is otthon
élhessenek. A rendszernek része egy részletes öndiagnosztika, így az
esetek többségében azt is érzékeli, ha maga a rendszer hibásodik meg.

A rendszer egy alapállomásból (base station) épül fel,
ehhez kapcsolódnak szenzorok, illetve vezeték nélküli riasztható
eszközök. Értelemszerûen az alapállomások nem csak a hozzájuk kötõdõ
eszközöket képesek riasztani, hanem megfelelõ biztonsági beállítások
mellett egy másik helyen lévõ alapállomáshoz kötött eszközt is, például
idõs emberek gyermekeinek otthonában. A rendszert kifejezetten úgy
tervezték, hogy leállások ne, vagy nagyon ritkán legyenek csak
szükségesek. A értesítendõ célállomások átirányíthatóak.
Lehetõvé válik a rendszeren belül megállapítani egy-egy ember
tartózkodási helyét is. Ajtó-szenzorokkal az is beállítható, hogy az
idõs ember otthonát csak bizonyos idõszakban hagyhassa el, például
megzavarodott állapotban ne induljon neki az éjszakának egyedül.

A rendszer elõnye, hogy független a telefon-hálózattól, illetve annak
kieséseitõl, nem igényli személyi számítógép meglétét a monitorozandó
lakhelyen, az egyes szenzorok ellenállóak (például vízzel szemben), az
egyes eszközök kevés karbantartást igényelnek (például hosszú tartalmú
elemek), valamint az egyes figyelmeztetõ jelzések bármely Everon
alapállomásról bármely másik alapállomásra eljuttathatók.

	\item Biztonsági rendszerek kivitelezése. Az elõzõ pontban
kifejtett rendszerhez kapcsolódhatnak mozgás, ajtó- és egyéb érzékelõk,
melyek egyrészt segítenek az emberek védelmében (például tûz esetén kulcs
nélkül is el lehessen hagyni a házat), másrészt viszont támadók ellen is
védenek: ha elhagyták a házat, akkor a mozgásérzékelõ riasztóként is
funkcionál. Ezen kívül idõsebb emberek számára segítséget nyújthat, hogy
a hagyományos kulcs helyett egy engedélyezõ kulcsot hordhatnak magukkal,
melynek jelenlétét a rendszer automatikusan érzékeli, a
beléptetõkártyákhoz hasonló módon.

	\item Tulajdon és berendezés monitorozása. Az elõzõekhez
kapcsolódóan egyéb szenzorokat is fogalmaz a cég, melyek lehetõvé
teszik, hogy autók vagy hasonlóan értékes objektumok hollétét
akár a cég online weblapján keresztül ellenõrizzük, vagy bizonyos
paramétereik megváltozásakor, ill. megadott érték felvétele esetén
szöveges értesítést kapjunk.
\end{itemize}

\subsubsection*{Vivago}

Magyaroszágon a Sonaris Kft\cite{sonaris} mûködik együtt a finn IST
International Security Technology Oy\cite{ist} céggel, mely a
Vivago\cite{vivago} aktív betegfelügyeleti rendszer megalkotója.

A Vivago rendszernek a magukat csak részben ellátni képes idõsebb
emberek, a krónikus betegségben szenvedõk, fogyatékkal élõk a
célközönsége. A rendszer 24 órás felügyelettel segíti az embereket, és
automatikusan is képes segítséget hívni, a sérült ember közremûködése
nélkül.

A korábbiakhoz képest újdonság, hogy a Vivago egy-egy felügyelt beteg
esetén elõször tanuló módban mûködik, tehát méri a személy különbözõ
aktivitásait, majd a tanuló idõszak után képes érzékelni az anomáliákat,
és riasztást eszközölni. Ezáltal lehetõvé válik, hogy ne kelljen kézzel
állítani a riasztási paramétereket, melyek pontos megadása a rendszer
bevezetése során nehézségeket okozhat.

A rendszer konkrétan egy karkötõ jellegû szenzorból, valamint egy, a
lakásban elhelyezendõ segélyállomásból áll, mely egyben kihangosított
telefonként is használható szükség esetén.

A magyarországi forgalmazó ezen kívül ügyeletes ápolót is biztosít, így
megoldódik az is, hogy az értesített családtag a felmerült
probléma megoldásához nem rendelkezik elegendõ kompetenciával.
Természetesen egy rendszer tervezése szempontjából ez ugyanúgy csak egy
értesíthetõ végpontként jelenik meg -- azonban a rendszerek
összehasonlítása szempontjából e részlet nem elhanyagolható különbség.

\subsubsection*{Telcomed}

A Telcomed\cite{telcomed} egy ír kereskedelmi cég, pulzusmérõt,
lázmérõt, vérnyomásmérõt, vércukormérõt és hasonló eszközöket forgalmaz.
Egy teljes infrastruktúrát nyújtanak, a betegek otthonában elhelyezett egységtõl a web-alapú
Telcomed monitorozó központig. Zárt kommunikációs protokollt használnak,
és a megoldásuk nem arra lett tervezve, hogy harmadik fél által gyártott
megoldások integrálhatóak lehessenek a rendszerbe.

\begin{figure}[htp]
\centering
\includegraphics[width=100mm,keepaspectratio]{telcomed.eps}
\caption{A Telcomed rendszer áttekintése}\label{fig:telcomed}
\end{figure}

\subsection{Keretrendszerek}

Egy életviteli rendszer számos csomópontból és végpontból áll. A
végpontok információt fogadhatnak, ha riasztás érkezik, valamint
döntéshozatal vagy szenzorok esetén információt küldhetnek is. A
rendszer létrehozásakor a legtöbb probléma már itt jelentkezik: a
végpontokat valamilyen módon a csatlakozási pontokhoz kell kötni, erre
nem volna hátrányos valamilyen szabványos megoldást használni, valamint
el szeretnénk kerülni a kerék feltalálását is.

Ebbõl következik, hogy a rendszert mindenképpen érdemes valamilyen
jelenleg is elérhetõ keretrendszerre építeni, és nem teljesen önálló
egységként létrehozni.

E bevezetõ alfejezet célja ismertetni ezek közül néhány jelenleg is
használatban lévõ megoldást, hogy ezek után legyen viszonyítási alapunk
az Erlang környezet által nyújtott funkcionalitás megítéléséhez.

\subsubsection*{RPC}

Az egyik legelsõ\cite{rpc1} ilyen megoldást a Sun cég specifikálta
1988-ban. A szabványt ma is aktívan használják, (e munka írásának
pillanatában) legutolsó verzióját\cite{rpc2} 2009-ben adták ki. A
megcélzott probléma a következõ: adott egy C függvény, amelyet szeretnénk
transzparens módon meghívni, de úgy, hogy egy másik gépen fusson le.
Tehát a kliens oldalon kell egy csonk (stub), mely azonos interfésszel
rendelkezik, mint az eredeti függvény, de az implementáció magában
foglalja a távoli kiszolgálóhoz való csatlakozást, a távoli
kódfuttatást, valamint az eredmény lekérését. A kiszolgáló oldalán
szintén szükség van egy csonk függvényre, mely lehetõvé teszi, hogy az
RPC kiszolgáló kérés esetén meghívja a tényleges implementációját a
függvénynek. A távoli eljáráshíváshoz egy interfészt kell definiálni egy
interfész-leíró nyelvvel (Interface Description Language, IDL), majd
ebbõl a csonkok generálhatóak például az \emph{rpcgen} programmal.

A módszernek manapság az egyik fontos felhasználási területe a hálózati
filerendszerek (Network File System, NFS). Hátrányai közül leginkább azt
érdemes megemlíteni, hogy heterogén környezetben, illetve nyitott
hálózaton limitált a funkcionalitása.

\subsubsection*{DCOM}

A DCOM\cite{dcom} (Distributed Component Object Model) technológiát a
Microsoft alkotta meg, a szintén általuk kidolgozott COM (Component
Object Model) kiterjesztéseként. A DCOM nem titkolt szándéka
versenytársként megjelenni a késõbb említésre kerülõ CORBA
architektúrával szemben.

A DCOM mögötti gondolat az volt, hogy a népszerû COM technológiát
továbbfejlesszék, és lehetõvé tegyék az eljáráshívást távoli
számítógépen is. A COM legfontosabb tulajdonsága, hogy lehetõvé tette
alkalmazások számára, hogy egy publikus interfészt definiáljanak, és az
ebben megjelölt függvényeket a gépen futó más alkalmazások meghívják. Az
RPC-hez képest újdonság, hogy az interfészt nem kell elõre tudniuk a
klienseknek, hanem egy \texttt{QueryInterface()} függvényen keresztül az
lekérdezhetõ.

Annak ellenére, hogy alternatív implementációk elérhetõek más
rendszerekre is, ez a technológia igazán csak Windows rendszereken
terjedt el.

\subsubsection*{CORBA}

A CORBA\cite{corba} szabványt az Object Management Group (OMG) dolgozta
ki, célja pedig, hogy több nyelv, több gépen együtt tudjon mûködni,
tehát lehetõvé tegye közöttük a távoli eljáráshívást. Fontos újdonság
még benne, hogy teljes mértékben hordozható.

Az interfész megadása itt is IDL segítségével történik, viszont az is a
szabvány része, hogy az IDL-t hogyan kell leképezni számos nyelvre.
Természetesen ezen kívül az elõre meghatározott nyelv-listán kívül is
még több nyelvhez elérhetõ a CORBA, de ott az implementáció már nem
szabványosított.

A tényleges távoli eljáráshívás két legfontosabb komponense itt a
objektumkérés-közvetítõ (Object Request Broker, ORB -- az alkalmazás más
objektumokkal csak ezen keresztül léphet interakcióba), valamint az
objektumadapter (Object Adapter), amelynek feladata kezelni az
objektumok referencia-számlálóját, figyelni az élettartalmát, s.í.t.

\subsubsection*{XML-RPC}

Végezetül megemlítjük az XML-RPC\cite{xmlrpc} szabványt, mely HTTP
protokoll felett, XML használatával oldja meg a távoli eljáráshívást. Ez
a megközelítés rendkívül népszerû napjainkban webszolgáltatások esetén,
valamint a Microsoft által a DCOM leváltására megalkotott WCF (Windows
Communications Framework) is XML-RPC-t használ belül.

\subsubsection*{OSGi}

E Java alapú keretrendszerre a következõ fejezetben részletesen
kitérünk.
